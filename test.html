<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="application.css">
  <title>JS Form</title>
</head>

<body> 
  <h1>Turnsheet</h1>
  <p>All items should be able to be selected or deselected</p> 
  <form method="post">
    <div>
      <hr>
      <h3>Stadium</h3>
      <p> A stand must be selected for adding seats or upgrading the condition</p>
      <div>
        <input type="radio" name="stand" value="stand_n" id="stand_n">
        <label for="stand_n">North Stand</label>
        <input type="radio" name="stand" value="stand_s" id="stand_s">
        <label for="stand_s">South Stand</label>
        <input type="radio" name="stand" value="stand_e" id="stand_e">
        <label for="stand_e">East Stand</label>
        <input type="radio" name="stand" value="stand_w" id="stand_w">
        <label for="stand_w">West Stand</label>
      </div>
      <div>
        <input type="radio" name="seats" value="add_2000" id="add_2000">
        <label for="add_2000">Add 2000 seats</label>
        <input type="radio" name="seats" value="add_4000" id="add_4000">
        <label for="add_4000">Add 4000 seats</label>
        <input type="radio" name="seats" value="add_6000" id="add_6000">
        <label for="add_6000">Add 6000 seats</label>
        <input type="radio" name="seats" value="add_8000" id="add_8000">
        <label for="add_8000">Add 8000 seats</label>
      </div>
      <div>
        <input type="radio" name="condition" value="upgrade_condition" id="upgrade_condition">
        <label for="upgrade_condition">Upgrade condition</label>
      </div>
    </div>
    <hr>
    <div>
      <h3>Coach</h3>
      <p>Only one can be selected</p>
      <input type="radio" name="coaches" value="staff_gkp" id="staff_gkp">
      <label for="staff_gkp">Goalkeeping Coach</label>
      <input type="radio" name="coaches" value="staff_dfc" id="staff_dfc">
      <label for="staff_dfc">Defensive Coach</label>
      <input type="radio" name="coaches" value="staff_mid" id="staff_mid">
      <label for="staff_mid">Midfield Coach</label>
      <input type="radio" name="coaches" value="staff_att" id="staff_att">
      <label for="staff_att">Attacking Coach</label>
      <input type="radio" name="coaches" value="staff_fitness" id="staff_fitness">
      <label for="staff_fitness">Fitness Coach</label>
      <input type="radio" name="coaches" value="staff_scout" id="staff_scout">
      <label for="staff_scout">Scout</label>
    </div>
    <hr>
    <div>
      <h3>Property</h3>
      <p>Only one can be selected</p>
      <input type="radio" name="property" value="pitch" id="pitch">
      <label for="pitch">Pitch</label>
      <input type="radio" name="property" value="hospitality" id="hospitality">
      <label for="hospitality">Hospitality</label>
      <input type="radio" name="property" value="facilities" id="facilities">
      <label for="facilities">Facilities</label>
    </div>
    <hr>
    <div>
      <h3>Player Actions</h3>
      <p>Each player has a card. Only one player in the squad can have blend or fitness selected</p>
      <p>list can be selected on its own</p>
      <p>Contract or Bonus can be selected for every player.  If either is selected a value must also be selected</p>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Card 1</h5>
          <input type="radio" name="player_action_squad_1" value="blend" id="blend_1">
          <label for="blend_1">Blend</label>
          <input type="radio" name="player_action_squad_1" value="fitness" id="fitness_1">
          <label for="fitness_1">Fitness</label>
          <hr>
          <input type="radio" name="player_action_1" value="contract" id="contract_1">
          <label for="contract_1">Contract</label>
          <input type="radio" name="player_action_1" value="bonus" id="bonus_1">
          <label for="bonus_1">Bonus</label>
          <input type="radio" name="player_action_1" value="list" id="list_1">
          <label for="list_1">list</label>
          <hr>
          <input type="radio" name="player_action_amount_1" value="250000" id="250000_1">
          <label for="250000_1">250k</label>
          <input type="radio" name="player_action_amount_1" value="500000" id="500000_1">
          <label for="500000_1">500k</label>
          <input type="radio" name="player_action_amount_1" value="750000" id="750000_1">
          <label for="750000_1">750k</label>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Card 2</h5>
          <input type="radio" name="player_action_squad_2" value="blend" id="blend_2">
          <label for="blend_2">Blend</label>
          <input type="radio" name="player_action_squad_2" value="fitness" id="fitness_2">
          <label for="Fitness_2">Fitness</label>
          <hr>
          <input type="radio" name="player_action_2" value="contract" id="contract_2">
          <label for="contract_2">Contract</label>
          <input type="radio" name="player_action_2" value="bonus" id="bonus_2">
          <label for="bonus_2">Bonus</label>
          <input type="radio" name="player_action_2" value="list" id="lis_2">
          <label for="list_2">list</label>
          <hr>
          <input type="radio" name="player_action_amount_2" value="250000" id="250000_2">
          <label for="250000_2">250k</label>
          <input type="radio" name="player_action_amount_2" value="500000" id="500000_2">
          <label for="50000_2">500k</label>
          <input type="radio" name="player_action_amount_2" value="750000" id="750000_2">
          <label for="750000_2">750k</label>
        </div>
      </div>
    </div>
    <hr>
    <div>
      <h3>Transfer</h3>
      <p>A transfer type must be selected and a club and amount must be selected</p>
      <input type="radio" name="transfer_1_type" value="circuit" id="circuit">
      <label for="pitch">Circuit</label>
      <input type="radio" name="transfer_1_type" value="managed" id="managed">
      <label for="hospitality">Managed</label>
      <input type="radio" name="transfer_1_type" value="unmanaged" id="unmanaged">
      <label for="facilities">Unmanaged</label>
      <input type="text" name="club" placeholder="club">
      <input type="text" name="amount" placeholder="amount">
    </div>
    <hr>
    <input type="submit" value="Submit">
  </form>

<script>
  window.addEventListener('load', () => {
    const formdata = JSON.parse(sessionStorage.getItem('formdata'));
    if (formdata) {
      const form = document.querySelector('form');
      const inputs = form.querySelectorAll('input');
      inputs.forEach(input => {
        if (input.type === 'radio') {
          if (input.value === formdata[input.name]) {
            input.checked = true;
          }
        } else if (input.type === 'text') {
          input.value = formdata[input.name];
        } else if (input.type === 'checkbox') {
          if (formdata[input.name].includes(input.value)) {
            input.checked = true;
          }
        }
      });
    }
  });

  const form = document.querySelector('form');
  form.addEventListener('input', (e) => {
    e.preventDefault();
    const data = new FormData(form);
    const values = Object.fromEntries(data.entries());

    for (const key in values) {
      let type = document.querySelector(`input[name=${key}]`).type;
      
      if (type === 'checkbox') {
        values[key] = data.getAll(key);
      }
    }
    
    sessionStorage.setItem('formdata', JSON.stringify(values));
    console.log(values);
  });


</script>

  </body>
</html>